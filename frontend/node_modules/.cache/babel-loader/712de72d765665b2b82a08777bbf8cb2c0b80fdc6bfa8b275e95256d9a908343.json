{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\Blog\\\\client\\\\src\\\\pages\\\\addPostFrom.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addPost } from \"../store/postsSlice\";\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddPostFrom() {\n  _s();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.auth);\n  let [postInfo, setPostInfo] = React.useState({\n    title: \"\",\n    content: \"\",\n    img: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  function handleChange(e) {\n    let {\n      value,\n      name\n    } = e.target;\n    setPostInfo(preInfo => {\n      return {\n        ...preInfo,\n        [name]: value\n      };\n    });\n  }\n  const canAddPost = Boolean(postInfo.title) && Boolean(postInfo.content);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError(\"You must be Loged in\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"blogImage\", postInfo.blogImage); // Assuming blogImage is the file input from your form\n    formData.append(\"title\", postInfo.title);\n    formData.append(\"content\", postInfo.content);\n    formData.append(\"userId\", user._id);\n    formData.append(\"reactions\", JSON.stringify({\n      like: 0,\n      wow: 0,\n      love: 0,\n      care: 0\n    }));\n    formData.append(\"comments\", JSON.stringify([]));\n    const blog = {\n      title: postInfo.title,\n      content: postInfo.content,\n      userId: user._id,\n      reactions: {\n        like: 0,\n        wow: 0,\n        love: 0,\n        care: 0\n      },\n      comments: []\n    };\n    const response = await fetch(\"/api/blogs/addBlog\", {\n      method: \"POST\",\n      body: JSON.stringify(blog),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setError(json.error);\n    }\n    if (response.ok) {\n      setError(\"\");\n      dispatch(addPost({\n        ...blog,\n        _id: nanoid()\n      }));\n    }\n    setPostInfo({\n      title: \"\",\n      content: \"\",\n      userId: \"\"\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center p-12 dark:bg-gray-800\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto w-full max-w-[550px] flex flex-col gap-y-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-4xl text-teal-500 dark:text-teal-300 italic underline \",\n        children: \"Add a Blog :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: handleSubmit,\n        encType: \"multipart/form-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"title\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Blog title\",\n            type: \"text\",\n            name: \"title\",\n            value: postInfo.title,\n            onChange: handleChange,\n            required: true,\n            className: \"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-400 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"blogImage\",\n            children: \"Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"blogImage\",\n            onChange: handleFile,\n            className: \"w-full text-base dark:text-gray-200 dark:bg-gray-600 bg-gray-100 py-3 px-6 rounded-md\\r file:mr-4 file:py-2 file:px-4\\r file:rounded-full file:border-0\\r file:text-sm file:font-semibold\\r file:bg-gray-200 file:text-green-500\\r hover:file:bg-gray-300 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"content\",\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: \"What is on your mind\",\n            cols: \"30\",\n            rows: \"4\",\n            name: \"content\",\n            value: postInfo.content,\n            onChange: handleChange,\n            required: true,\n            className: \"w-full resize-none rounded-md border border-[#e0e0e0] bg-white  py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-500 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"err\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"hover:shadow-form rounded-md bg-green-600 py-3 px-8 text-base font-semibold text-white outline-none\",\n          type: \"submit\",\n          disabled: !canAddPost,\n          children: \"Add Blog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(AddPostFrom, \"p+AfB/V0urcGEblYHV6N4YFGQ0c=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = AddPostFrom;\nexport default AddPostFrom;\nvar _c;\n$RefreshReg$(_c, \"AddPostFrom\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","addPost","nanoid","AddPostFrom","dispatch","user","state","auth","postInfo","setPostInfo","title","content","img","error","setError","handleChange","e","value","name","target","preInfo","canAddPost","Boolean","handleSubmit","preventDefault","formData","FormData","append","blogImage","_id","JSON","stringify","like","wow","love","care","blog","userId","reactions","comments","response","fetch","method","body","headers","Authorization","token","json","ok","handleFile"],"sources":["D:/react/Blog/client/src/pages/addPostFrom.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addPost } from \"../store/postsSlice\";\r\nimport { nanoid } from \"@reduxjs/toolkit\";\r\n\r\nfunction AddPostFrom() {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.auth);\r\n\r\n  let [postInfo, setPostInfo] = React.useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    img: \"\",\r\n  });\r\n\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function handleChange(e) {\r\n    let { value, name } = e.target;\r\n    setPostInfo((preInfo) => {\r\n      return {\r\n        ...preInfo,\r\n        [name]: value,\r\n      };\r\n    });\r\n  }\r\n\r\n  const canAddPost = Boolean(postInfo.title) && Boolean(postInfo.content);\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user) {\r\n      setError(\"You must be Loged in\");\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append(\"blogImage\", postInfo.blogImage); // Assuming blogImage is the file input from your form\r\n    formData.append(\"title\", postInfo.title);\r\n    formData.append(\"content\", postInfo.content);\r\n    formData.append(\"userId\", user._id);\r\n    formData.append(\r\n      \"reactions\",\r\n      JSON.stringify({\r\n        like: 0,\r\n        wow: 0,\r\n        love: 0,\r\n        care: 0,\r\n      })\r\n    );\r\n    formData.append(\"comments\", JSON.stringify([]));\r\n    const blog = {\r\n      title: postInfo.title,\r\n      content: postInfo.content,\r\n      userId: user._id,\r\n      reactions: {\r\n        like: 0,\r\n        wow: 0,\r\n        love: 0,\r\n        care: 0,\r\n      },\r\n      comments: [],\r\n    };\r\n\r\n    const response = await fetch(\"/api/blogs/addBlog\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(blog),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    });\r\n    const json = await response.json();\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n    }\r\n    if (response.ok) {\r\n      setError(\"\");\r\n      dispatch(\r\n        addPost({\r\n          ...blog,\r\n          _id: nanoid(),\r\n        })\r\n      );\r\n    }\r\n\r\n    setPostInfo({\r\n      title: \"\",\r\n      content: \"\",\r\n      userId: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center p-12 dark:bg-gray-800\">\r\n      <div className=\"mx-auto w-full max-w-[550px] flex flex-col gap-y-10\">\r\n        <p className=\"text-4xl text-teal-500 dark:text-teal-300 italic underline \">\r\n          Add a Blog :\r\n        </p>\r\n        <form\r\n          className=\"form\"\r\n          onSubmit={handleSubmit}\r\n          encType=\"multipart/form-data\"\r\n        >\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"title\"\r\n            >\r\n              Title\r\n            </label>\r\n            <input\r\n              placeholder=\"Blog title\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              value={postInfo.title}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-400 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"blogImage\"\r\n            >\r\n              Picture\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              name=\"blogImage\"\r\n              onChange={handleFile}\r\n              className=\"w-full text-base dark:text-gray-200 dark:bg-gray-600 bg-gray-100 py-3 px-6 rounded-md\r\n      file:mr-4 file:py-2 file:px-4\r\n      file:rounded-full file:border-0\r\n      file:text-sm file:font-semibold\r\n      file:bg-gray-200 file:text-green-500\r\n      hover:file:bg-gray-300 \"\r\n            />\r\n          </div>\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"content\"\r\n            >\r\n              Content\r\n            </label>\r\n            <textarea\r\n              placeholder=\"What is on your mind\"\r\n              cols=\"30\"\r\n              rows=\"4\"\r\n              name=\"content\"\r\n              value={postInfo.content}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full resize-none rounded-md border border-[#e0e0e0] bg-white  py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-500 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\r\n            ></textarea>\r\n          </div>\r\n\r\n          {error && <span className=\"err\">{error}</span>}\r\n          <button\r\n            className=\"hover:shadow-form rounded-md bg-green-600 py-3 px-8 text-base font-semibold text-white outline-none\"\r\n            type=\"submit\"\r\n            disabled={!canAddPost}\r\n          >\r\n            Add Blog\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddPostFrom;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}