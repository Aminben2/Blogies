{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\Blog\\\\client\\\\src\\\\pages\\\\addPostFrom.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addPost } from \"../store/postsSlice\";\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddPostFrom() {\n  _s();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.auth);\n  let [postInfo, setPostInfo] = React.useState({\n    title: \"\",\n    content: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  function handleChange(e) {\n    let {\n      value,\n      name\n    } = e.target;\n    setPostInfo(preInfo => {\n      return {\n        ...preInfo,\n        [name]: value\n      };\n    });\n  }\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError(\"You must be Loged in\");\n      return;\n    }\n\n    // const formData = new FormData();\n    // formData.append(\"blogImage\", postInfo.blogImage); // Assuming blogImage is the file input from your form\n    // formData.append(\"title\", postInfo.title);\n    // formData.append(\"content\", postInfo.content);\n    // formData.append(\"userId\", user._id);\n    // formData.append(\n    //   \"reactions\",\n    //   JSON.stringify({\n    //     like: 0,\n    //     wow: 0,\n    //     love: 0,\n    //     care: 0,\n    //   })\n    // );\n    // formData.append(\"comments\", JSON.stringify([]));\\\n\n    const response = await fetch(\"/api/blogs/addBlog\", {\n      method: \"POST\",\n      body: post,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setError(json.error);\n    }\n    if (response.ok) {\n      setError(\"\");\n      dispatch(addPost({\n        ...json,\n        _id: nanoid()\n      }));\n    }\n    setPostInfo({\n      title: \"\",\n      content: \"\",\n      blogImage: null\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center p-12 dark:bg-gray-800\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto w-full max-w-[550px] flex flex-col gap-y-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-4xl text-teal-500 dark:text-teal-300 italic underline \",\n        children: \"Add a Blog :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: handleSubmit,\n        encType: \"multipart/form-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"title\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Blog title\",\n            type: \"text\",\n            name: \"title\",\n            value: postInfo.title,\n            onChange: handleChange,\n            required: true,\n            className: \"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-400 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"blogImage\",\n            children: \"Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"blogImage\",\n            onChange: handleChange,\n            accept: \"image/*\",\n            className: \"w-full text-base dark:text-gray-200 dark:bg-gray-600 bg-gray-100 py-3 px-6 rounded-md\\r file:mr-4 file:py-2 file:px-4\\r file:rounded-full file:border-0\\r file:text-sm file:font-semibold\\r file:bg-gray-200 file:text-green-500\\r hover:file:bg-gray-300 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\",\n            htmlFor: \"content\",\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: \"What is on your mind\",\n            cols: \"30\",\n            rows: \"4\",\n            name: \"content\",\n            value: postInfo.content,\n            onChange: handleChange,\n            required: true,\n            className: \"w-full resize-none rounded-md border border-[#e0e0e0] bg-white  py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-500 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"err\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"hover:shadow-form rounded-md bg-green-600 py-3 px-8 text-base font-semibold text-white outline-none\",\n          type: \"submit\",\n          disabled: !canAddPost,\n          children: \"Add Blog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(AddPostFrom, \"/Jcx8fDi8KWcWuFfV0qX3SUkLcI=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = AddPostFrom;\nexport default AddPostFrom;\nvar _c;\n$RefreshReg$(_c, \"AddPostFrom\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","addPost","nanoid","AddPostFrom","dispatch","user","state","auth","postInfo","setPostInfo","title","content","error","setError","handleChange","e","value","name","target","preInfo","handleSubmit","preventDefault","response","fetch","method","body","post","headers","Authorization","token","json","ok","_id","blogImage","canAddPost"],"sources":["D:/react/Blog/client/src/pages/addPostFrom.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addPost } from \"../store/postsSlice\";\r\nimport { nanoid } from \"@reduxjs/toolkit\";\r\n\r\nfunction AddPostFrom() {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.auth);\r\n\r\n  let [postInfo, setPostInfo] = React.useState({\r\n    title: \"\",\r\n    content: \"\",\r\n  });\r\n\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function handleChange(e) {\r\n    let { value, name } = e.target;\r\n    setPostInfo((preInfo) => {\r\n      return {\r\n        ...preInfo,\r\n        [name]: value,\r\n      };\r\n    });\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user) {\r\n      setError(\"You must be Loged in\");\r\n      return;\r\n    }\r\n\r\n    // const formData = new FormData();\r\n    // formData.append(\"blogImage\", postInfo.blogImage); // Assuming blogImage is the file input from your form\r\n    // formData.append(\"title\", postInfo.title);\r\n    // formData.append(\"content\", postInfo.content);\r\n    // formData.append(\"userId\", user._id);\r\n    // formData.append(\r\n    //   \"reactions\",\r\n    //   JSON.stringify({\r\n    //     like: 0,\r\n    //     wow: 0,\r\n    //     love: 0,\r\n    //     care: 0,\r\n    //   })\r\n    // );\r\n    // formData.append(\"comments\", JSON.stringify([]));\\\r\n\r\n    const response = await fetch(\"/api/blogs/addBlog\", {\r\n      method: \"POST\",\r\n      body: post,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    });\r\n    const json = await response.json();\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n    }\r\n    if (response.ok) {\r\n      setError(\"\");\r\n      dispatch(\r\n        addPost({\r\n          ...json,\r\n          _id: nanoid(),\r\n        })\r\n      );\r\n    }\r\n\r\n    setPostInfo({\r\n      title: \"\",\r\n      content: \"\",\r\n      blogImage: null,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center p-12 dark:bg-gray-800\">\r\n      <div className=\"mx-auto w-full max-w-[550px] flex flex-col gap-y-10\">\r\n        <p className=\"text-4xl text-teal-500 dark:text-teal-300 italic underline \">\r\n          Add a Blog :\r\n        </p>\r\n        <form\r\n          className=\"form\"\r\n          onSubmit={handleSubmit}\r\n          encType=\"multipart/form-data\"\r\n        >\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"title\"\r\n            >\r\n              Title\r\n            </label>\r\n            <input\r\n              placeholder=\"Blog title\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              value={postInfo.title}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-400 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"blogImage\"\r\n            >\r\n              Picture\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              name=\"blogImage\"\r\n              onChange={handleChange}\r\n              accept=\"image/*\"\r\n              className=\"w-full text-base dark:text-gray-200 dark:bg-gray-600 bg-gray-100 py-3 px-6 rounded-md\r\n      file:mr-4 file:py-2 file:px-4\r\n      file:rounded-full file:border-0\r\n      file:text-sm file:font-semibold\r\n      file:bg-gray-200 file:text-green-500\r\n      hover:file:bg-gray-300 \"\r\n            />\r\n          </div>\r\n          <div className=\"mb-5\">\r\n            <label\r\n              className=\"mb-3 block text-base font-medium text-[#07074D] dark:text-sky-500\"\r\n              htmlFor=\"content\"\r\n            >\r\n              Content\r\n            </label>\r\n            <textarea\r\n              placeholder=\"What is on your mind\"\r\n              cols=\"30\"\r\n              rows=\"4\"\r\n              name=\"content\"\r\n              value={postInfo.content}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full resize-none rounded-md border border-[#e0e0e0] bg-white  py-3 px-6 text-base font-medium text-[#6B7280] dark:bg-gray-600 dark:text-gray-100 outline-none focus:border-green-500 focus:shadow-md dark:border-0 dark:focus:outline dark:focus:outline-green-400\"\r\n            ></textarea>\r\n          </div>\r\n\r\n          {error && <span className=\"err\">{error}</span>}\r\n          <button\r\n            className=\"hover:shadow-form rounded-md bg-green-600 py-3 px-8 text-base font-semibold text-white outline-none\"\r\n            type=\"submit\"\r\n            disabled={!canAddPost}\r\n          >\r\n            Add Blog\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddPostFrom;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,MAAM,QAAQ,kBAAkB;AAAC;AAE1C,SAASC,WAAW,GAAG;EAAA;EACrB,MAAMC,QAAQ,GAAGL,WAAW,EAAE;EAC9B,MAAMM,IAAI,GAAGL,WAAW,CAAEM,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC;EAE/C,IAAI,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,KAAK,CAACC,QAAQ,CAAC;IAC3CY,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE;EACX,CAAC,CAAC;EAEF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAEtC,SAASgB,YAAY,CAACC,CAAC,EAAE;IACvB,IAAI;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAC9BT,WAAW,CAAEU,OAAO,IAAK;MACvB,OAAO;QACL,GAAGA,OAAO;QACV,CAACF,IAAI,GAAGD;MACV,CAAC;IACH,CAAC,CAAC;EACJ;EAEA,MAAMI,YAAY,GAAG,MAAOL,CAAC,IAAK;IAChCA,CAAC,CAACM,cAAc,EAAE;IAElB,IAAI,CAAChB,IAAI,EAAE;MACTQ,QAAQ,CAAC,sBAAsB,CAAC;MAChC;IACF;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAAC,oBAAoB,EAAE;MACjDC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI;MACVC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAG,UAASvB,IAAI,CAACwB,KAAM;MACtC;IACF,CAAC,CAAC;IACF,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAI,EAAE;IAClC,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;MAChBlB,QAAQ,CAACiB,IAAI,CAAClB,KAAK,CAAC;IACtB;IACA,IAAIU,QAAQ,CAACS,EAAE,EAAE;MACflB,QAAQ,CAAC,EAAE,CAAC;MACZT,QAAQ,CACNH,OAAO,CAAC;QACN,GAAG6B,IAAI;QACPE,GAAG,EAAE9B,MAAM;MACb,CAAC,CAAC,CACH;IACH;IAEAO,WAAW,CAAC;MACVC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXsB,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;EAED,oBACE;IAAK,SAAS,EAAC,wDAAwD;IAAA,uBACrE;MAAK,SAAS,EAAC,qDAAqD;MAAA,wBAClE;QAAG,SAAS,EAAC,6DAA6D;QAAA,UAAC;MAE3E;QAAA;QAAA;QAAA;MAAA,QAAI,eACJ;QACE,SAAS,EAAC,MAAM;QAChB,QAAQ,EAAEb,YAAa;QACvB,OAAO,EAAC,qBAAqB;QAAA,wBAE7B;UAAK,SAAS,EAAC,MAAM;UAAA,wBACnB;YACE,SAAS,EAAC,mEAAmE;YAC7E,OAAO,EAAC,OAAO;YAAA,UAChB;UAED;YAAA;YAAA;YAAA;UAAA,QAAQ,eACR;YACE,WAAW,EAAC,YAAY;YACxB,IAAI,EAAC,MAAM;YACX,IAAI,EAAC,OAAO;YACZ,KAAK,EAAEZ,QAAQ,CAACE,KAAM;YACtB,QAAQ,EAAEI,YAAa;YACvB,QAAQ;YACR,SAAS,EAAC;UAAyP;YAAA;YAAA;YAAA;UAAA,QACnQ;QAAA;UAAA;UAAA;UAAA;QAAA,QACE,eACN;UAAK,SAAS,EAAC,MAAM;UAAA,wBACnB;YACE,SAAS,EAAC,mEAAmE;YAC7E,OAAO,EAAC,WAAW;YAAA,UACpB;UAED;YAAA;YAAA;YAAA;UAAA,QAAQ,eACR;YACE,IAAI,EAAC,MAAM;YACX,IAAI,EAAC,WAAW;YAChB,QAAQ,EAAEA,YAAa;YACvB,MAAM,EAAC,SAAS;YAChB,SAAS,EAAC;UAKM;YAAA;YAAA;YAAA;UAAA,QAChB;QAAA;UAAA;UAAA;UAAA;QAAA,QACE,eACN;UAAK,SAAS,EAAC,MAAM;UAAA,wBACnB;YACE,SAAS,EAAC,mEAAmE;YAC7E,OAAO,EAAC,SAAS;YAAA,UAClB;UAED;YAAA;YAAA;YAAA;UAAA,QAAQ,eACR;YACE,WAAW,EAAC,sBAAsB;YAClC,IAAI,EAAC,IAAI;YACT,IAAI,EAAC,GAAG;YACR,IAAI,EAAC,SAAS;YACd,KAAK,EAAEN,QAAQ,CAACG,OAAQ;YACxB,QAAQ,EAAEG,YAAa;YACvB,QAAQ;YACR,SAAS,EAAC;UAAsQ;YAAA;YAAA;YAAA;UAAA,QACtQ;QAAA;UAAA;UAAA;UAAA;QAAA,QACR,EAELF,KAAK,iBAAI;UAAM,SAAS,EAAC,KAAK;UAAA,UAAEA;QAAK;UAAA;UAAA;UAAA;QAAA,QAAQ,eAC9C;UACE,SAAS,EAAC,qGAAqG;UAC/G,IAAI,EAAC,QAAQ;UACb,QAAQ,EAAE,CAACsB,UAAW;UAAA,UACvB;QAED;UAAA;UAAA;UAAA;QAAA,QAAS;MAAA;QAAA;QAAA;QAAA;MAAA,QACJ;IAAA;MAAA;MAAA;MAAA;IAAA;EACH;IAAA;IAAA;IAAA;EAAA,QACF;AAEV;AAAC,GAzJQ/B,WAAW;EAAA,QACDJ,WAAW,EACfC,WAAW;AAAA;AAAA,KAFjBG,WAAW;AA2JpB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}