{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amine\\\\Desktop\\\\Blogs\\\\frontend\\\\src\\\\components\\\\comment.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUsers } from \"../store/usersSlice\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport { delComment } from \"../store/postsSlice\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Comment = props => {\n  _s();\n  const {\n    users\n  } = useSelector(state => state.users);\n  const [showCommentControls, setShowCommentControls] = useState(false);\n  const user = useSelector(state => state.auth);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    dispatch(getUsers());\n  }, [dispatch]);\n  const userComment = users.find(user => user._id === props.userId);\n  const pin = () => {};\n  const appreciate = () => {};\n  const deleteComment = async (postId, commentId) => {\n    const response = await fetch(\"api/profile/delComment\", {\n      method: \"PATCH\",\n      body: JSON.stringify({\n        postId,\n        commentId\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (response.ok) {\n      dispatch(delComment({\n        postId,\n        commentId\n      }));\n    } else {\n      console.log(json.error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: userComment && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cmnt w-fit py-4 mt-3 bg-white border-b-2 border-r-2 border-gray-200 sm:px-4 sm:py-4 md:px-4 sm:rounded-lg sm:shadow-sm md:w-2/3 dark:bg-gray-400 dark:border-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative flex flex-row md-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"w-12 h-12 border-2 border-gray-300 rounded-full\",\n          alt: \"Anonymous's avatar\",\n          src: \"https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&faces=1&faceindex=1&facepad=2.5&w=500&h=500&q=80\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-col mt-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center flex-1 px-4 font-bold leading-tight\",\n            children: [userComment.firstName, \" \", userComment.lastName, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-xs font-normal text-gray-500 dark:text-gray-700\",\n              children: props.createdAt ? formatDistanceToNow(new Date(props.createdAt), {\n                addSuffix: true\n              }) : \"Just now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 px-2 ml-2 text-sm font-medium leading-loose text-gray-600 dark:text-white\",\n            children: props.comment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), props.modify && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute flex justify-between items-center right-0 \",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => setShowCommentControls(preState => !preState),\n            className: \"self-end\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"./imgs/menu.png\",\n              className: \"w-9 cursor-pointer hover:bg-gray-200 rounded-full p-1 hover:transition-colors duration-100 dark:hover:bg-gray-300\",\n              alt: \"CommentMenu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }, this), showCommentControls && /*#__PURE__*/_jsxDEV(\"ul\", {\n            onMouseLeave: () => setShowCommentControls(false),\n            className: `absolute flex flex-col transition gap-2 top-10 right-0 bg-gray-200 text-gray-800 p-2 rounded-md z-30 dark:bg-gray-300 duration-500 ctrl-comment`,\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"cursor-pointer font-medium text-xs\",\n              onClick: () => deleteComment(props.commentId, props.postId),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"cursor-pointer font-medium text-xs\",\n              onClick: pin,\n              children: [\"Pin\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"cursor-pointer font-medium text-xs\",\n              onClick: appreciate,\n              children: \"Appreciate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(Comment, \"qQiPoHjCGa0uw9MDiZK2e7IF5D8=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","getUsers","formatDistanceToNow","delComment","Comment","props","users","state","showCommentControls","setShowCommentControls","user","auth","dispatch","useEffect","userComment","find","_id","userId","pin","appreciate","deleteComment","postId","commentId","response","fetch","method","body","JSON","stringify","headers","Authorization","token","json","ok","console","log","error","firstName","lastName","createdAt","Date","addSuffix","comment","modify","e","preState"],"sources":["C:/Users/amine/Desktop/Blogs/frontend/src/components/comment.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getUsers } from \"../store/usersSlice\";\r\n\r\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\r\nimport { delComment } from \"../store/postsSlice\";\r\n\r\nexport const Comment = (props) => {\r\n  const { users } = useSelector((state) => state.users);\r\n  const [showCommentControls, setShowCommentControls] = useState(false);\r\n  const user = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n  React.useEffect(() => {\r\n    dispatch(getUsers());\r\n  }, [dispatch]);\r\n\r\n  const userComment = users.find((user) => user._id === props.userId);\r\n\r\n  const pin = () => {};\r\n\r\n  const appreciate = () => {};\r\n  const deleteComment = async (postId, commentId) => {\r\n    const response = await fetch(\"api/profile/delComment\", {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify({ postId, commentId }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    });\r\n\r\n    const json = await response.json();\r\n\r\n    if (response.ok) {\r\n      dispatch(delComment({ postId, commentId }));\r\n    } else {\r\n      console.log(json.error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {userComment && (\r\n        <div className=\"cmnt w-fit py-4 mt-3 bg-white border-b-2 border-r-2 border-gray-200 sm:px-4 sm:py-4 md:px-4 sm:rounded-lg sm:shadow-sm md:w-2/3 dark:bg-gray-400 dark:border-0\">\r\n          <div className=\"relative flex flex-row md-10\">\r\n            <img\r\n              className=\"w-12 h-12 border-2 border-gray-300 rounded-full\"\r\n              alt=\"Anonymous's avatar\"\r\n              src=\"https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&faces=1&faceindex=1&facepad=2.5&w=500&h=500&q=80\"\r\n            />\r\n            <div className=\"flex-col mt-1\">\r\n              <div className=\"flex items-center flex-1 px-4 font-bold leading-tight\">\r\n                {userComment.firstName} {userComment.lastName}\r\n                <span className=\"ml-2 text-xs font-normal text-gray-500 dark:text-gray-700\">\r\n                  {props.createdAt\r\n                    ? formatDistanceToNow(new Date(props.createdAt), {\r\n                        addSuffix: true,\r\n                      })\r\n                    : \"Just now\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex-1 px-2 ml-2 text-sm font-medium leading-loose text-gray-600 dark:text-white\">\r\n                {props.comment}\r\n              </div>\r\n            </div>\r\n            {props.modify && (\r\n              <div className=\"absolute flex justify-between items-center right-0 \">\r\n                <span\r\n                  onClick={(e) =>\r\n                    setShowCommentControls((preState) => !preState)\r\n                  }\r\n                  className=\"self-end\"\r\n                >\r\n                  <img\r\n                    src=\"./imgs/menu.png\"\r\n                    className=\"w-9 cursor-pointer hover:bg-gray-200 rounded-full p-1 hover:transition-colors duration-100 dark:hover:bg-gray-300\"\r\n                    alt=\"CommentMenu\"\r\n                  />\r\n                </span>\r\n                {showCommentControls && (\r\n                  <ul\r\n                    onMouseLeave={() => setShowCommentControls(false)}\r\n                    className={`absolute flex flex-col transition gap-2 top-10 right-0 bg-gray-200 text-gray-800 p-2 rounded-md z-30 dark:bg-gray-300 duration-500 ctrl-comment`}\r\n                  >\r\n                    <li\r\n                      className=\"cursor-pointer font-medium text-xs\"\r\n                      onClick={() =>\r\n                        deleteComment(props.commentId, props.postId)\r\n                      }\r\n                    >\r\n                      Delete\r\n                    </li>\r\n                    <li\r\n                      className=\"cursor-pointer font-medium text-xs\"\r\n                      onClick={pin}\r\n                    >\r\n                      Pin{\" \"}\r\n                    </li>\r\n                    <li\r\n                      className=\"cursor-pointer font-medium text-xs\"\r\n                      onClick={appreciate}\r\n                    >\r\n                      Appreciate\r\n                    </li>\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}